<html>
    <head>
        <title>IRMA Authentication</title>
        <link rel="stylesheet" type="text/css" href="css/irma.css">
        <script type="text/javascript" src="../../bower_components/jquery/dist/jquery.js"></script>
        <script type="text/javascript" src="../../bower_components/jquery-qrcode/dist/jquery.qrcode.js"></script>
        <script language="javascript" type="text/javascript">
            function sendMessage(data){
                window.opener.postMessage(data, "*");
                console.log("Sent message: " + JSON.stringify(data));
                close();
            }

            function sendSuccess() {
                var data = {
                    status: "success",
                    message: document.getElementById("msg").value
                };
                sendMessage(data);
            }

            function sendError() {
                var data = {
                    status: "error",
                    message: "Authentication denied"
                }
                sendMessage(data);
            }
        </script>
    </head>
    <body>
        <div class="irma_page">
            <div class="irma_content">
                <img src="img/irma_logo_160px.png" class="irma_logo_top" alt="IRMA logo"></img>
                <div class="irma_title">showing attribute(s)</div>
                <p> A website requested that you disclose some IRMA attributes. Either scan the QR code with your phone, or press the card reader button to continue.</p>
                <div class="irma_option_container">
                    <div id="qrcode" class="irma_option_box"></div>
                    <div class="irma_option_box">
                        <img width="128px" height="128px" src="img/pc_client3.png"></img>
                    </div>
                </div>
                <script language="javascript" type="text/javascript">
                    $("#qrcode").qrcode({
                        text: "Hello hello hello http://irma-web-service",
                        size: 128,
                    });
                </script>
                </p>
                <!--
                <button onclick="sendSuccess();">Authenticate</button>
                <button onclick="sendError();">Error</button>
                -->
            </div>
            <div class="irma_button_box">
                <button class="irma_button">Help</button>
                <button class="irma_button">Cancel</button>
            </div>
        </div>
    </body>
</html>
